<div class="assistant-container">

  <!-- Header -->
  <div class="assistant-header" *ngIf="!callSubmitted && !inQueue">
    <h2>Call Assistant</h2>
    <p class="assistant-subtitle">Call us directly from your browser</p>
  </div>

  <div class="assistant-body">
    <!-- Before Call -->
    <div *ngIf="!callSubmitted && !inQueue" class="call-form">
      <button class="btn-call" (click)="startBrowserCall()" [disabled]="isInitializing">
        <i class="material-icons">call</i>
      </button>
      <p *ngIf="errorMessage" class="error-text">{{ errorMessage }}</p>
      <p *ngIf="!errorMessage && !isInitializing" class="hint">
        Press the green call button to speak with a live agent. —please enable microphone access when prompted.
      </p>
      <p *ngIf="isInitializing" class="hint">
        Initializing… please allow microphone access when prompted.
      </p>
    </div>

    <!-- Queue Screen -->
    <div *ngIf="inQueue && !callSubmitted" class="queue-screen">
      <div class="queue-card">
        <div class="queue-loader"></div>
        <h3>You are in queue: <span class="queue-number">{{ queueNumber }}</span></h3>
        <p class="queue-message">“{{ currentMessage }}”</p>
        <p class="waiting-text">Please stay with us… connecting shortly</p>
      </div>
    </div>

    <!-- During Call -->
    <div *ngIf="callSubmitted" class="call-screen fade-in">
      <div class="avatar-container">
        <div class="pulse-ring"></div>
        <div class="avatar">
          <i class="material-icons">account_circle</i>
        </div>
      </div>

      <p class="twilio-number">1800 209 4455</p>
      <!-- Uncomment below Line if want To show dynamic number nodejs TARGET_NUMBER inside .env file -->
      <!-- <p class="twilio-number">{{ displayNumber }}</p> -->
      <p class="status-text">{{ callStatus }}</p>
      <p class="call-duration" *ngIf="callStatus === 'In Call'">{{ callDuration }}</p>

        <!-- Uncomment below for keypad on call screen -->
      <!-- <div class="dialed-display" [class.has-text]="dialedNumbers.length > 0">
        {{ dialedNumbers }}
      </div> -->



      <div class="call-actions">
        <button class="action-btn" (click)="toggleMute()">
          <i class="material-icons">{{ isMuted ? 'mic_off' : 'mic' }}</i>
          <span>Mute</span>
        </button>

        <!-- Uncomment below for keypad on call screen -->
        <!-- <button class="action-btn" (click)="showKeypad = true">
          <i class="material-icons">dialpad</i>
          <span>Keypad</span>
        </button> -->

        <button class="end-btn" (click)="endCall()">
          <i class="material-icons">call_end</i>
        </button>
      </div>

        <!-- Uncomment below for keypad on call screen -->
      <!-- Keypad -->
      <!-- <div class="keypad" *ngIf="showKeypad">
        <button (click)="sendDigit('1')">1</button>
        <button (click)="sendDigit('2')">2</button>
        <button (click)="sendDigit('3')">3</button>
        <button (click)="sendDigit('4')">4</button>
        <button (click)="sendDigit('5')">5</button>
        <button (click)="sendDigit('6')">6</button>
        <button (click)="sendDigit('7')">7</button>
        <button (click)="sendDigit('8')">8</button>
        <button (click)="sendDigit('9')">9</button>
        <button (click)="sendDigit('*')">*</button>
        <button (click)="sendDigit('0')">0</button>
        <button (click)="sendDigit('#')">#</button>
        <button class="erase-btn" (click)="eraseDigit()"><i class="material-icons">close</i></button>
        <button class="close-keypad" (click)="closeKeypad()">Close</button>
      </div> -->

    </div>
  </div>
</div>
